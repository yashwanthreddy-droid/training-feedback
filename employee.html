<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Training Feedback | HGS</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
body {
  margin: 0;
  background: #f4f6f9;
  font-family: 'Inter', sans-serif;
}

.container {
  max-width: 820px;
  margin: 40px auto;
  background: #ffffff;
  padding: 36px;
  border-radius: 16px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.08);
}

.header {
  text-align: center;
  margin-bottom: 30px;
}

.header img {
  height: 48px;
  margin-bottom: 12px;
}

.header h2 {
  margin: 0;
  color: #003a63;
}

.section {
  margin-top: 28px;
}

label {
  font-weight: 600;
  display: block;
  margin-bottom: 6px;
  margin-top: 18px;
}

input, select, textarea {
  width: 100%;
  padding: 12px;
  border-radius: 10px;
  border: 1px solid #ccc;
  font-size: 14px;
}

input:focus, select:focus, textarea:focus {
  border-color: #005bab;
  outline: none;
  box-shadow: 0 0 0 3px rgba(0,91,171,0.15);
}

.rating-row {
  margin-top: 12px;
}

.rating-buttons{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}

.rating-buttons button{
  width:44px;
  height:44px;
  border-radius:999px;  /* ✅ circular */
  border: 1px solid #cfd8e3;
  background:#ffffff;
  font-weight:800;
  cursor:pointer;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  transition: .15s ease;
}

.rating-buttons button:hover{
  transform: translateY(-1px);
  box-shadow: 0 8px 18px rgba(0,0,0,.08);
}

.rating-buttons button.selected{
  background:#005bab;
  border-color:#005bab;
  color:#fff;
}

.rating-buttons button.selected {
  background: #005bab;
  color: #fff;
}

.submit-btn {
  margin-top: 36px;
  width: 100%;
  padding: 16px;
  font-size: 18px;
  border-radius: 14px;
  border: none;
  background: #005bab;
  color: white;
  font-weight: 700;
  cursor: pointer;
}

.submit-btn:disabled {
  background: #9bbad1;
  cursor: not-allowed;
}

.success {
  margin-top: 20px;
  background: #e8f7ee;
  color: #0a6b38;
  padding: 14px;
  border-radius: 12px;
  font-weight: 600;
  display: none;
  text-align: center;
}
</style>
</head>

<body>

<div class="container">
  <div class="header">
    <img src="hgs-logo.png" alt="HGS Logo">
    <h2>Training Feedback Form</h2>
    <p>Please share your honest feedback to help us improve learning experiences.</p>
  </div>

  <!-- BASIC DETAILS -->
  <div class="section">
    <label>Training Topic *</label>
    <input id="trainingTopic">

    <label>Training Date *</label>
<input type="date" id="trainingDate">
<div id="dateError" style="display:none; margin-top:8px; color:#b42318; font-weight:600; font-size:12px;">
  Please select a date within the last 60 days.
</div>

    <label>Location *</label>
    <select id="location">
      <option value="">Select</option>
      <option>OIC</option>
      <option>BSEL</option>
      <option>SV & PK</option>
      <option>IRIS</option>
      <option>Bangalore</option>
      <option>Virtual</option>
    </select>

    <label>Employee Code *</label>
    <input id="employeeCode">

    <label>Department *</label>
    <input id="department">
  </div>

  <!-- RATINGS -->
  <div class="section">
    <h3>Session Ratings (1 = Poor, 5 = Excellent)</h3>

    <div class="rating-row">
      <label>Overall Session Rating *</label>
      <div class="rating-buttons" data-field="overallRating"></div>
    </div>

    <div class="rating-row">
      <label>Content relevance to your work *</label>
      <div class="rating-buttons" data-field="contentRelevanceRating"></div>
    </div>

    <div class="rating-row">
      <label>Trainer clarity & delivery *</label>
      <div class="rating-buttons" data-field="trainerDeliveryRating"></div>
    </div>

    <div class="rating-row">
      <label>Session pace *</label>
      <div class="rating-buttons" data-field="sessionPaceRating"></div>
    </div>

    <div class="rating-row">
      <label>Usefulness for your current role *</label>
      <div class="rating-buttons" data-field="usefulnessRating"></div>
    </div>
  </div>

  <!-- QUALITATIVE -->
  <div class="section">
    <label>NPS (0–10) *</label>
    <input type="number" min="0" max="10" id="npsScore">

    <label>What did you like most? *</label>
    <textarea id="likedMost"></textarea>

    <label>What could be improved? *</label>
    <textarea id="toImprove"></textarea>

    <label>Any other suggestions or topics?</label>
    <textarea id="suggestions"></textarea>
  </div>

  <button class="submit-btn" id="submitBtn" disabled>Submit Feedback</button>
  <div class="success" id="successMsg">Thank you! Your feedback has been recorded.</div>
</div>

<script>
const WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbxfaK3udVG9WBAUz-L4HqgLAj_QRnkhyeicqg688iUAH5xMq58pvtjuJryYtNzSEaE5xQ/exec';
const ratings = {};
<script>
const WEB_APP_URL = 'PASTE_YOUR_APPS_SCRIPT_URL_HERE';
const ratings = {};

// ✅ Enforce training date range: last 60 days only (no future dates)
(function limitTrainingDate(){
  const today = new Date();
  const max = today.toISOString().slice(0,10);
  const minDate = new Date(today);
  minDate.setDate(minDate.getDate() - 60);
  const min = minDate.toISOString().slice(0,10);

  const dateEl = document.getElementById('trainingDate');
  dateEl.setAttribute('max', max);
  dateEl.setAttribute('min', min);
})();
document.querySelectorAll('.rating-buttons').forEach(group => {
  const field = group.dataset.field;
  ratings[field] = null;
  for (let i = 1; i <= 5; i++) {
    const btn = document.createElement('button');
    btn.textContent = i;
    btn.onclick = () => {
      ratings[field] = i;
      [...group.children].forEach(b => b.classList.remove('selected'));
      btn.classList.add('selected');
      validate();
    };
    group.appendChild(btn);
  }
});

function validate() {
  const dateEl = document.getElementById('trainingDate');
  const dateVal = dateEl.value;

  // validate date range (last 60 days, no future)
  let dateOk = false;
  if (dateVal) {
    const picked = new Date(dateVal + "T00:00:00");
    const today = new Date(); today.setHours(0,0,0,0);
    const minDate = new Date(today); minDate.setDate(minDate.getDate() - 60);

    dateOk = picked >= minDate && picked <= today;
  }

  document.getElementById('dateError').style.display = dateVal && !dateOk ? 'block' : 'none';

  const npsVal = document.getElementById('npsScore').value;
  const npsOk = npsVal !== '' && Number(npsVal) >= 0 && Number(npsVal) <= 10;

  const requiredFilled =
    trainingTopic.value &&
    dateOk &&
    location.value &&
    employeeCode.value &&
    department.value &&
    npsOk &&
    Object.values(ratings).every(v => v !== null) &&
    likedMost.value &&
    toImprove.value;

  submitBtn.disabled = !requiredFilled;
}

document.querySelectorAll('input, select, textarea').forEach(el =>
  el.addEventListener('input', validate)
);

submitBtn.onclick = async () => {
  submitBtn.textContent = 'Submitting...';

  const payload = {
    trainingTopic: trainingTopic.value,
    trainingDate: trainingDate.value,
    location: location.value,
    employeeCode: employeeCode.value,
    department: department.value,
    ...ratings,
    npsScore: npsScore.value,
    likedMost: likedMost.value,
    toImprove: toImprove.value,
    suggestions: suggestions.value
  };

  await fetch(WEB_APP_URL, {
    method: 'POST',
    body: JSON.stringify(payload)
  });

  successMsg.style.display = 'block';
  submitBtn.textContent = 'Submitted';
  submitBtn.disabled = true;
};
</script>

</body>
</html>







